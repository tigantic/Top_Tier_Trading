
name: CI

on:
    push:
    branches: ["main"]
    pull_request:
    branches: ["main"]
      workflow_dispatch:

permissions:
  contents: read
  actions: read
  packages: write



jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

  - name: Setup Python
          uses: actions/setup-python@v5
          with:
              python-version: "3.12"


          - name: Install Poetry
            uses: abatilo/actions-poetry@v3
              with:
          poetry-version: "1.8.3"

      - name: Configure Poetry
          run: poetry config virtualenvs.in-project false

        - name: Install lint group only
        run: poetry install --only lint --no-root

      - name: Run pre-commit on all files
        run: poetry run pre-commit run --all-files
